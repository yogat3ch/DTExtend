/*! dtextend 2024-05-25 14:02:04 */
function seq(start,stop,step=1){return Array.from({length:(stop-start)/step+1},(value,index)=>start+index*step)}function sum(arr){return arr.reduce((p,v)=>p+v)}function jqueryObjsOnly(jq){var e=[];for(i=0;i<jq.length;i++)e.push(jq[[i]]);return e}function arr_subset(arr,rc=[1,1]){if(out=[],rc[0]&&rc[1])out=arr[rc[0]][rc[1]];else if(rc[1])for(let e=0;e<arr.length;e++)out.push(arr[e][rc[1]]);else rc[0]&&(out=arr[rc[0]]);return out}function which(array){var t=[];for(let e=0;e<array.length;e++)array[e]&&t.push(e);return t}function waitForEl(selector){return new Promise(resolve=>{if(document.querySelector(selector))return resolve(document.querySelector(selector));const e=new MutationObserver(mutations=>{document.querySelector(selector)&&(resolve(document.querySelector(selector)),e.disconnect())});e.observe(document.body,{childList:!0,subtree:!0})})}function id_check(id,rm_hash=!1){var e=new RegExp("^#");return e.test(id)||rm_hash?rm_hash&&e.test(id)&&(id=id.substring(1)):id="#"+id,id}function objectMap(obj,fn){return Object.fromEntries(Object.entries(obj).map(([k,v],i)=>[k,fn(v,k,i)]))}function tagMatch(arr,fn){let t=[];return t=arr instanceof jQuery?(t=arr.map((i,e)=>{let t=null;return t=fn(e)?i:t}),Array.from(jqueryObjsOnly(t))):arr.reduce(function(a,e,i){return fn(e)&&a.push(i),a},[])}function isVisible(selector){return $(selector).is(":visible")}function dt_table_id(id,rm_hash=!1){var e=void 0,e=/^\#?DataTables/g.test(id)?(console.log("dt_table_id: not a valid ID"),id):$(id_check(id)+" table").attr("id");return id_check(e,rm_hash)}function dt_names(id){return Object.values(objectMap(jqueryObjsOnly($(dt_table_id(id)+" th")),e=>$(e).text()))}function dt_id_from_table(table){return table.table().node().id}function get_dt_props(table){return window.sessionStorage.getItem(table.table().node().id)}class dt_props{#id={table:null,shiny:null,render:null,render:null,props:null,page:null};#render_count=0;#table;#colClassNames;constructor(table){this.#id.table=table.table().node().id;debugger;this.#id.shiny=dt_shiny_id(this.#id.table,!0),this.#id.render=this.#id.shiny+"_rendered",this.#id.page=this.#id.shiny+"_page",this.#id.props=this.#id.table+"_props",this.#table=table,this.#colClassNames=table.settings()[0].oInit.columnDefs.map(e=>e.className),this.shinyRender(),this.shinyPage(),window.sessionStorage.setItem(this.#id.table,this)}ShinySet(id,val){Shiny.setInputValue(id,val,{priority:"event"})}shinyRender(){return this.#render_count=this.#render_count+1,this.ShinySet(this.#id.render,this.#render_count),this.#render_count}shinyPage(){var e=this.#table.page();return this.ShinySet(this.page_id,e+1),e}shinyPageLength(){var e=this.#table.page.len();return this.ShinySet(this.#id.shiny+"_pageLength",this.#table.page.len()),e}}function dt_shiny_id(id,rm_hash=!1){var e=void 0,e=/^\#?DataTables/g.test(id)?$(id_check(id)+"_wrapper").parent(".datatables").attr("id"):(console.log("dt_shiny_id: not a valid Datatables id"),id);return id_check(e,rm_hash)}function dt_api(id){return $(dt_table_id(id)).DataTable()}function dt_tab_accessible(id){id=dt_api(id);document.debug_mode&&console.log("dt_tab_accessible ran"),id.on("key",function(e,datatable,key,cell,originalEvent){var r=cell.table().node().id,r=$("#"+r).parent().parent().attr("id");if(13==key){key=cell.index().row,cell=$(datatable.row(key).node());cell.hasClass("selected")?cell.removeClass("selected"):cell.addClass("selected");let e=datatable.page(),t=datatable.page.len();Shiny.setInputValue(r+"_row_last_clicked",key+1,{priority:"event"});datatable=tagMatch(cell.parent("tbody").children("tr"),e=>$(e).hasClass("selected")).map(i=>i+1+e*t);Shiny.setInputValue(r+"_rows_selected",datatable,{priority:"event"})}})}function dt_retain_color(id,cl){id=jqueryObjsOnly($(dt_table_id(id)+" td."+cl));id&&id.forEach(e=>{var e=$(e),t=e.attr("style");t&&!/important\;$/g.test(t)&&e.attr("style",t.split(/\;$/)[0]+" !important;")})}function dt_filter_inputs(id){return jqueryObjsOnly($(dt_table_id(id)+' input[type="search"]'))}function dt_filter_reset(id){Shiny.setInputValue(dt_shiny_id(id,rm_hash=!0)+"_reset",0,{priority:"event"})}function dt_filter_set(id,filters=[],reset=!1){var e=dt_table_id(id),t=dt_names(id);if("string"==typeof e){debugger;var r=dt_filter_inputs(id),i=Array(r.length).fill(""),a=dt_api(e);if(reset)dt_filter_reset(id);else if(filters.length){if(Array.isArray(filters))i=filters;else for(var n=Object.keys(filters),d=Object.values(filters),s=0;s<n.length;s++)i[t.indexOf(n[s])]=d[s];for(s=0;s<i.length;s++)$(r[s]).val(i[s]),a.column(s).search(i[s]).draw()}Shiny.setInputValue(id+"_search_columns",i,{priority:"event"})}}function dt_search_icon(id){var id=dt_table_id(id)+"_filter",id=$(id),e=id.html();e&&(e=e.replace(/Search:/g,'<i class="fas fa-magnifying-glass p-2"></i>'),$(id).html(e),id.find("input").attr("placeholder","Search"))}function dt_filter_placeholders(id,character="Search",integer="Use Slider",number="Use Slider",disabled="N/A"){id=dt_table_id(id),$(id+" td[data-type='character'] input[type='search']").attr("placeholder",character),$(id+" td[data-type='integer'] input[type='search']").attr("placeholder",integer),$(id+" td[data-type='number'] input[type='search']").attr("placeholder",number),$(id+" td[data-type='number'] input[disabled]").attr("placeholder",disabled)}